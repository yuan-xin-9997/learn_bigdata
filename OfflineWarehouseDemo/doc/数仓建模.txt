初学者的问题：不太懂建表逻辑，以及字段的选取

两种情况：
	从0到1搭建数仓
		①确定数仓的基础功能：
				提供报表（BI）
				为其他系统提供数据:
						用户画像：  年龄很大，天天看美女，在后台打上老色皮
						机器学习：  改进和验证建模，不断调整模型。 量化交易
						
		②基于功能，要求数仓必须提供xxx数据。
				统计xxx报表数据：
							最近1，7，30 新增的用户数
							最近1，7，30 用户留存率....
							
		③开会讨论
				开发公司数仓的指标建设体系。
				拿产品的需求和指标建设体系进行验证，如果符合指标建设体系的规则，那么就是一个合法的需求，否则和产品沟通改进。
				
				将需求指标化。
				
				当前数仓的指标建设体系：
						原子指标：  原子部分，不和具体需求挂钩。
						派生指标：  
						衍生指标：
						
		④需求指标化后
				为什么要分为事实和维度： 因为我们遵循了维度建模的思想
				
				设计数仓的分层：
					----------存原始数据
					ODS:
					---------事实
					DWD:
					---------维度
					DIM:
					---------------
						全是指标。 需求(指标)驱动
					DWS: 对要计算的指标进行一定程序的聚合(smarry)
					ADS: 直接是指标
					
		
		⑤建模ADS
				原则： 
					一般是一个需求一张表，同一类型(统计的业务、周期、粒度相同，只是指标不同)的需求可以合并到一张表。
					需要统计什么字段，就设计什么字段，一定有日期(dt)
					
		⑥建模DWS和DWD
					ADS有需求： 最近1、7、30日	品类	订单数
					
					和业务相关：  下单。
										将下单的业务过程使用维度建模的思想去分解，将这个业务过程中所涉及的事实表和维度表，
										采取业务总线矩阵的方式呈现。
											事实：  order_info , order_detail , order_detail_coupon, order_detail_activity...
											维度：  商品。
													3w    用户，时间，地区(省，市区，街道。 IP归属地)
					
					
					确定DWD要采集哪些事实表，确定DIM层要有哪些维度表。
					
		⑦DWD层事实表的数量：
					每个ADS层所需要的业务，都可以建一张事务型事实表。
					如果有类似存量指标统计的需求，可以对业务建周期快照事实表
					
					字段设计：
							回归ADS的需求，体现粒度，从需求和3w原则中选择维度，选择描述事实的度量。
							
							为了项目的扩展性，将后续要分析的字段也加进去。
							
		⑧DWS的建模
					回顾ADS的需求。
					从ADS的需求提炼派生指标(重点)，明确业务过程，周期，粒度
					根据建表原则：
							周期相同，业务相同，粒度相同的放入一张表。
							如果周期相同，业务相同，优先选择细粒度。
							
					字段选：
								①体现粒度
								②体现统计的指标
								③体现周期
										矮胖型： 列多
										高瘦型： 行多
		
		⑦DIM的建模
				降维。
				根据业务总线矩阵，查看需要哪些维度。
					一种维度在DIM层建一张表。
					高频使用的维度，在DIM层建一张表。
					低频使用的维度，如果字段很少，可以直接退化到事实表中。
					确定表的数量:		用户，商品，优惠券，活动，时间，地区
							
					确定表的字段：  
							a) 几乎不变的维度表     时间，地区
							b) 只会insert的维度表   商品，活动，优惠券
									普通维度表，找业务数据库中和此类维度相关的所有字段。
							c) 低频insert和update的维度表  用户
									拉链表
									找到业务数据库中和当前维度主题相关的所有字段 + startdate ,enddate
							
					如果维度表变化了怎么办？
							全量采集
							拉链表
							
		⑧ODS层
				由DWD和DIM反推。
					DWD： 确定要为哪些业务事实建表。去业务数据库(Mysql)找相关的业务表
					DIM:  确定要采集哪些维度。 去业务数据库(Mysql)找相关的业务表
					ods： 业务数据的来源。
								业务数据库(Mysql)找相关的业务表，一张表对应ODS层的一张表。
								业务数据库(Mysql)找相关的业务表有什么字段，ODS层就建对应的字段。
								
					有些数据和用户行为相关，需要和开发APP的人员沟通，在APP端进行埋点。
							有些公司有平台，登上去，点一点
							
		⑨要采集什么数据就确定。
				确定采集方案。
						全量？增量？
						批(运行起来，采集，采集完，就关闭)？ 流(一直采集)？
						选框架。
							
					
	
	
	数仓已经成型，基于新业务在已有的模型上，丰富
		①提出新的指标
		②基于新的指标，落实指标建设体系上，看指标是否合法。
		合法，就在ADS层建模，同上。
		③分析指标，看从DWS现有的模型上能否统计出，
		不能，再建表，还是从已有的表中加字段
		④通常DWD和DIM和ODS都是不变了，除非业务变更了。产生了新业务，才需要增加ODS,DIM,DWD